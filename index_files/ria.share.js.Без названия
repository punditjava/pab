var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,f=0;f<d;f++){var e=a[f];if(b.call(c,e,f,a))return{i:f,v:e}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
var riaShare={services:{telegram:{name:"Telegram",popupUrl:"https://telegram.me/share/url?url=<%- data.url %>",popupWidth:820,popupHeight:500},vkontakte:{name:"\u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435",popupUrl:"https://vk.com/share.php?url=<%- data.url %>&title=<%- data.title %>",popupWidth:655,popupHeight:450},odnoklassniki:{name:"\u041e\u0434\u043d\u043e\u043a\u043b\u0430\u0441\u0441\u043d\u0438\u043a\u0438",popupUrl:"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl=<%- data.url %>",
popupWidth:580,popupHeight:336},twitter:{name:"Twitter",popupUrl:"https://twitter.com/intent/tweet?url=<%- data.url %>&text=<%- data.title %>:",popupWidth:600,popupHeight:250},viber:{name:"Viber",popupUrl:"viber://forward?text=<%- data.url %>",popupWidth:820,popupHeight:500,mobile:!0},whatsapp:{name:"WhatsApp",popupUrl:"whatsapp://send?text=<%- data.url %>",popupWidth:820,popupHeight:500,mobile:!0}},services_sort:[],options:{shareFullEl:".share-full",shareEl:".share"},states:{open:!1,modal:!1,type:!1,
mobile:!1,el:void 0,cw:0},el:void 0,init:function(){var a=this;a.states.mobile=a.mobileAndTabletcheck();a.states.cw=a.getClientWidth();a.initFullList();a.initItems($("body"));$(window).on("resize",function(){a.states.cw=a.getClientWidth();1==a.states.open&&(a.changeModal(),a.coordFullList())});$(window).on("scroll",function(){925<=a.states.cw&&("article"==a.states.type||"header"==a.states.type)&&a.hideFullList()})},initItems:function(a){for(var b=this,c=0,d=0;d<b.services_sort.length;d++)if(b.services_sort[d][3].mobile&&
b.states.mobile||!b.services_sort[d][3].mobile){var f={name:b.services_sort[d][0],title:b.services_sort[d][3].name};4>++c&&(f=_.template($("#shareBlockTemplate").html())({data:f}),a.find(b.options.shareEl).append(f))}c=_.template($("#shareBlockMoreTemplate").html())();a.find(b.options.shareEl).append(c);a.on("click",".share__more",function(a){var c=$(this).closest("[data-url]").attr("data-url"),d=$(this).closest("[data-title]").attr("data-title"),e=$(this).closest("[data-id]").attr("data-id");"undefined"!==
typeof navigator.share&&b.states.mobile?(navigator.share({url:c,title:d}),""!=e&&$.get("/services/counter/set/?obj_id="+e+"&obj_type=article&action_type=share")):$(this).hasClass("m-active")?b.hideFullList():(b.states.type=!1,$(this).parents(".share:first").hasClass("m-article")?b.states.type="article":$(this).parents(".share:first").hasClass("m-header")&&(b.states.type="header"),b.showFullList(a,$(this),c,d,e))});a.on("click",".share a[data-name]",function(a){b.serviceClick(a,$(this))})},initFullList:function(a){var b=
this;"undefined"===typeof a&&(a=b.options.shareFullEl);var c=0;this.services_sort=[];for(var d in b.services)b.services_sort.push([d,parseInt(ria.lsGet("ria.share."+d)||0),++c,b.services[d]]);b.services_sort.sort(function(a,b){return a[1]<b[1]?1:a[1]>b[1]||a[2]<b[2]?-1:1});for(c=0;c<b.services_sort.length;c++)if(b.services_sort[c][3].mobile&&b.states.mobile||!b.services_sort[c][3].mobile)d={name:b.services_sort[c][0],title:b.services_sort[c][3].name},d=_.template($("#shareFullTemplate").html())({data:d}),
$(a).find(" > ul").append(d);$(a).on("click","a[data-name]",function(a){b.serviceClick(a,$(this))})},serviceClick:function(a,b){a.stopPropagation();var c=b.data("name"),d=b.closest("[data-url]").attr("data-url"),f=b.closest("[data-title]").attr("data-title"),e=b.closest("[data-id]").attr("data-id");0!==d.lastIndexOf("http",0)&&(d=GLOBAL.www+d);d={url:encodeURIComponent(d),title:encodeURIComponent(f)};d=_.template(this.services[c].popupUrl)({data:d});this.openPopup(d,{width:this.services[c].popupWidth,
height:this.services[c].popupHeight});ria.lsSet("ria.share."+c,parseInt(ria.lsGet("ria.share."+c)||0)+1);""!=e&&$.get("/services/counter/set/?obj_id="+e+"&obj_type=article&action_type=share")},showFullList:function(a,b,c,d,f){var e=this;a.stopPropagation();$(document).on("click.hideshare ",function(){e.hideFullList();$(document).off("click.hideshare")});"undefined"!==typeof e.states.el&&e.states.el.removeClass("m-active");e.states.el=b;e.states.el.addClass("m-active");$(e.options.shareFullEl).attr({"data-url":c,
"data-title":d,"data-id":f});e.changeModal(!0);e.coordFullList();$(e.options.shareFullEl).toggleClass("m-article","article"==e.states.type).toggleClass("m-header","header"==e.states.type).addClass("active");e.states.open=!0},changeModal:function(a){0==this.states.modal&&925>this.states.cw&&(!0===a||void 0===a)?(this.states.modal=!0,$("html").addClass("modal-share"),ria.disablePageScroll(!0)):1==this.states.modal&&(!1===a||925<=this.states.cw)&&(this.states.modal=!1,$("html").removeClass("modal-share"),
ria.disablePageScroll(!1))},coordFullList:function(){var a=this.states.el;if(400>this.states.cw)$(this.options.shareFullEl).css({right:"10px",bottom:"10px",left:"10px",top:"auto"});else if(925>this.states.cw)$(this.options.shareFullEl).css({right:"10px",bottom:"10px",left:"auto",top:"auto"});else{var b=a.offset().top,c=a.offset().left,d=a.outerWidth(),f=a.outerHeight(),e=window.pageYOffset||document.documentElement.scrollTop,a=b-e,e=e+document.documentElement.clientHeight-b,g=$(this.options.shareFullEl).width(),
h=$(this.options.shareFullEl).height(),f=a>e?b-h-3:b+f+1,g=c-g+d/2+18;"article"==this.states.type&&(f=b-10,g=c+d+10);$(this.options.shareFullEl).toggleClass("m-bottom",!(a>e)).css({left:g+"px",top:f+"px",bottom:"auto",right:"auto"})}},openPopup:function(a,b){var c=Math.round(screen.width/2-b.width/2),d=0;screen.height>b.height&&(d=Math.round(screen.height/3-b.height/2));(c=window.open(a,"sl_"+this.service,"left="+c+",top="+d+",width="+b.width+",height="+b.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1"))?
c.focus():location.href=a;"undefined"!=typeof this.states.el&&this.hideFullList()},hideFullList:function(){1==this.states.open&&(this.changeModal(!1),this.states.el.removeClass("m-active"),$(this.options.shareFullEl).css({left:"auto",top:"auto",bottom:"auto",right:"auto"}).removeClass("active m-article m-header"),this.states.type=!1,this.states.el=void 0,this.states.open=!1)},getClientWidth:function(){return Math.max(window.innerWidth||0,(document.getElementsByTagName("html")[0]||{}).clientWidth||
0)},mobileAndTabletcheck:function(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a}};
