var $jscomp={scope:{},findInternal:function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");
$(function(){$(".modal__content.m-feedback").find("form").each(function(){var a=$(this),c=a.find(".form__alert.m-error"),b=a.find('.form__btn[type="submit"]'),d=function(a){a&&a.errors?a.errors.picture&&"max image size 15mb"==a.errors.picture?c.html("\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d \u0440\u0430\u0437\u043c\u0435\u0440 \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u044f - 15\u041c\u0431.").show():a.errors.picture&&
"empty image"==a.errors.picture?c.html("\u0421\u043a\u0440\u0438\u043d\u0448\u043e\u0442 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u043a \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435").show():a.errors.picture&&"invalid image format"==a.errors.picture?c.html("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430. \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0444\u043e\u0440\u043c\u0430\u0442\u044b .jpg, .png").show():
a.errors.form_request?c.html("\u041c\u044b \u0443\u0436\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441, \u0441\u043f\u0430\u0441\u0438\u0431\u043e.").show():c.html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430").show():(modalLayer.open({preset:"message_error"}),$("#modalMessageError").find(".form__btn").data("modal-open","feedback"))},e=function(){$.ajax({url:a.attr("action"),
type:"post",dataType:"json",data:new FormData(a[0]),processData:!1,contentType:!1,beforeSend:function(){b.attr("disabled",!1);c.hide()}}).done(function(b){b.error||!b.status||b.status&&"error"==b.status.toLowerCase()?d(b):(modalLayer.open({preset:"message_send"}),a[0].reset())}).fail(function(a){d(a)}).always(function(){b.attr("disabled",!0)})};a.on("submit",function(b){b.preventDefault();$('input[name="g-recaptcha-response"]',a).length?(window.grecaptchaFeedback=$.proxy(function(){grecaptcha.execute(GLOBAL.locale.grecaptcha.site_key).then(function(b){$("input[name=g-recaptcha-response]",
a).val(b);e()})},this),loadJS("https://www.google.com/recaptcha/api.js?render="+GLOBAL.locale.grecaptcha.site_key+"&onload=grecaptchaFeedback")):e()});a.on("input change paste keyup",function(){var d=a[0].checkValidity();c.toggle(!d);b.toggle(d)});a.on("change",'#modalFeedbackUnblockFormBlock input[type="radio"]',function(b){"1"===$(this).val()?a.find("#modalFeedbackUnblockFormBlockCount").removeClass("m-hide").find("input").removeAttr("disabled").prop("disabled",!1):a.find("#modalFeedbackUnblockFormBlockCount").addClass("m-hide").find("input").attr("disabled",
"disabled").prop("disabled",!0)})});$("#feedbackUnblockOpen").on("click",function(a){a.preventDefault();"ok"!==GLOBAL.auth.status?modalLayer.open("feedback_not_auth"):modalLayer.open("feedback_unblock")});$("#feedbackDeleteOpen").on("click",function(a){a.preventDefault();"ok"!==GLOBAL.auth.status?modalLayer.open("feedback_not_auth"):modalLayer.open("feedback_delete")});$("#feedbackCommonOpen").on("click",function(a){a.preventDefault();"ok"!==GLOBAL.auth.status?modalLayer.open("feedback_not_auth"):
modalLayer.open("feedback_common")})});$(function(){var a=$("#modalFeedbackAuthor").find("form"),c=$("#modalFeedbackAuthorError"),b=$("#modalFeedbackAuthorSubmit");a.riaForm({successCallback:function(){modalLayer.open({preset:"message_send"});a[0].reset()},errorCallback:function(){modalLayer.open({preset:"message_error"});$("#modalMessageError").find(".form__btn").data("modal-open","feedback_author")}});a.on("input change paste keyup",function(){var d=a[0].checkValidity();c.toggle(!d);b.toggle(d)})});
$(function(){var a=$("#modalQa").find("form"),c=$("#modalQaError"),b=$("#modalQaSubmit");a.riaForm({successCallback:function(){modalLayer.open({preset:"message_send"});a[0].reset()},errorCallback:function(){modalLayer.open({preset:"message_error"});$("#modalMessageError").find(".form__btn").data("modal-open","qa")}});a.on("input change paste keyup",function(){var d=a[0].checkValidity();c.toggle(!d);b.toggle(d)})});window.feedbackCheckAuth=function(){"ok"!==GLOBAL.auth.status&&modalLayer.open("feedback_not_auth")};
