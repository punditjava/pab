(function(c,g,l,m){var e=function(a,b){var d={show:!0,theme:"default",rtl:!1,reservePlace:!1,autoHide:!0,otherDirection:!1,addingIndent:10,scrollingDuration:250,slideDuration:500,buttons:{up:!1,scrollingUpSize:"100",down:!1,scrollingDownSize:"100"},endValues:{up:!1,down:!1},classes:{main:"the-in-scroll",active:"m-active",banSelect:"the-in__ban-drag-select",banScroll:"the-in__ban-scroll"},triggers:{all:!1,initialized:!0,refresh:!0,refreshed:!0,"up-pos":!0,"down-pos":!0}};this.$element=c(a);this.defOptions=
d;this.userOptions=b;this.options=c.extend(!0,{},d,b);this._origin=!1;this.prefix="";this.pluginNumber=0;this.addedTriggers=this.$scrollerTheme=this.$scroller=this.$scrollLine=this.$scroll=this.$downEndValue=this.$upEndValue=this.$content=this.$containerFrame=this.$container=this.$boxFrame=this.$box=this.$wrBox=this.frameResize=!1;this.startMoveYPosition=this.currentTopMoveScroller=this.currentMoveScrollerPosiiton=this.startMoveScrollerPosition=this.scrollingPercentage=this.topPxScroller=this.topPercentScroller=
this.topPxScrollContent=this.topPercentScrollContent=this.sizeScrollLine=this.pxSizeScroller=this.percentSizeScroller=this.widthCustomScroll=this.stateScrollbarReservePlace=this.widthDefaultScroll=null;this.init()};e.prototype.init=function(){this.prefix=this.options.classes.main+"__";this.pluginNumber=this.prefix+c.now();this._origin=this.$element.clone(!0);this.createMainHTML();this.updateEndValues();this.options.show&&(this.options.autoHide&&this.$element.addClass(this.prefix+"autohide"),this.options.otherDirection&&
this.$element.addClass(this.prefix+"direction"),this.options.reservePlace&&this.$element.addClass(this.prefix+"reserve"),this.createCustomScroll());this.refresh();this.registerEvents();this.registerEventsListener();(this.options.triggers.all||this.options.triggers.initialized)&&this.setTrigger("initialized")};e.prototype.registerEvents=function(){var a=this;g[a.pluginNumber+"__box"].onresize=function(){a.resizeFrameRefresh()};g[a.pluginNumber+"__container"].onresize=function(){a.resizeFrameRefresh()};
a.$box.bind("scroll",function(){a.refresh()});a.$scroller.on("touchstart  mousedown",function(b){"touchstart"==b.type?a.bindMoveScroller(b.originalEvent.touches[0].clientY||b.originalEvent.changedTouches[0].clientY):"mousedown"==b.type&&0==b.button&&a.bindMoveScroller(b.pageY);b.stopPropagation();b.preventDefault()});c(g).on("touchend  mouseup",function(b){("touchend"==b.type||"mouseup"==b.type&&0==b.button)&&a.unbindMoveScroller(b)})};e.prototype.registerEventsListener=function(){var a=this;a.$element.on("scroll-to."+
a.options.classes.main,function(b,d,c){a.scrollTo(d,c)});a.$element.on("scroll-up."+a.options.classes.main,function(b,d,c){a.scrollUp(d,c)});a.$element.on("scroll-down."+a.options.classes.main,function(b,d,c){a.scrollDown(d,c)});a.$element.on("add-scrolling-trigger."+a.options.classes.main,function(b,d,c,e,f,g,h,k){a.addScrollingTrigger(d,c,e,f,g,h,k)});a.$element.on("add-content."+a.options.classes.main,function(b,d,c,e,f){a.addContent(d,c,e,f)});a.$element.on("clear-content."+a.options.classes.main,
function(b,d,c){a.clearContent(d,c)})};e.prototype.createMainHTML=function(){this.$element.addClass(this.options.classes.main).addClass(this.prefix+this.options.theme);this.$wrBox=c('<div class="'+this.prefix+'wr-box"></div>');this.$box=c('<div class="'+this.prefix+'box"></div>');this.$container=c('<div class="'+this.prefix+'container"></div>');this.$content=c('<div class="'+this.prefix+'content"></div>');this.$boxFrame=c('<iframe title="scroll" name="'+this.pluginNumber+'__box" class="'+this.prefix+
'frame"></iframe>');this.$containerFrame=c('<iframe title="scroll" name="'+this.pluginNumber+'__container" class="'+this.prefix+'frame"></iframe>');this.$element.empty().css("overflow","hidden").append(this.$wrBox.append(this.$box.append(this.$boxFrame,this.$container.append(this.$containerFrame,this.$content))));this.hideDefaultScroll();this.$content.append(this._origin.clone(!0)[0].childNodes)};e.prototype.updateEndValues=function(){this.options.endValues.up&&(this.$upEndValue||(this.$upEndValue=
c('<div class="'+this.prefix+"end-value "+this.prefix+'up-end-value"></div>')),this.$upEndValue.append(1!=this.options.endValues.up?this.options.endValues.up:""),this.$wrBox.append(this.$upEndValue));this.options.endValues.down&&(this.$downEndValue||(this.$downEndValue=c('<div class="'+this.prefix+"end-value "+this.prefix+'down-end-value"></div>')),this.$downEndValue.append(1!=this.options.endValues.down?this.options.endValues.down:""),this.$wrBox.append(this.$downEndValue))};e.prototype.createCustomScroll=
function(){var a=this;a.$scroll=c('<div class="'+a.prefix+'scroll"></div>');a.$scrollLine=c('<div class="'+a.prefix+'scroll-line"></div>');a.$scroller=c('<div class="'+a.prefix+'scroller"></div>');a.$scrollerTheme=c('<div class="'+a.prefix+'scroller-theme"></div>');a.$element.append(a.$scroll.append(a.$scrollLine.append(a.$scroller.append(a.$scrollerTheme))));a.$scroll.bind("contextmenu",function(){return!1});a.$scrollLine.bind("click",a,a.scrollingByClickOnScrolline);a.options.buttons.up&&(a.$buttonUp=
c('<a class="'+a.prefix+"button "+a.prefix+'button-up"></a>'),a.$buttonUp.append(1!=a.options.buttons.up?a.options.buttons.up:c('<span class="'+a.prefix+'icon"></span>')),a.$scroll.append(a.$buttonUp).addClass(a.prefix+"with-up"),a.$buttonUp.click(function(){a.$box.scrollTop(a.$box.scrollTop()-parseInt(a.options.buttons.scrollingUpSize))}));a.options.buttons.down&&(a.$buttonDown=c('<a class="'+a.prefix+"button "+a.prefix+'button-down"></a>'),a.$buttonDown.append(1!=a.options.buttons.down?a.options.buttons.down:
c('<span class="'+a.prefix+'icon"></span>')),a.$scroll.append(a.$buttonDown).addClass(a.prefix+"with-down"),a.$buttonDown.click(function(){a.$box.scrollTop(a.$box.scrollTop()+parseInt(a.options.buttons.scrollingDownSize))}))};e.prototype.refresh=function(){(this.options.triggers.all||this.options.triggers.refresh)&&this.setTrigger("refresh");this.hideDefaultScroll();this.options.show&&(this.reservePlaceScroll(),this.setSizeScroller(),this.setTopScroller());this.scrollingPercentage=this.getScrollingPercentage();
this.checkExtremePositionScroller();this.checkAddedTriggers();(this.options.triggers.all||this.options.triggers.refreshed)&&this.setTrigger("refreshed")};e.prototype.scrollUp=function(a,b){this.scrollTo(a?a:0,b)};e.prototype.scrollDown=function(a,b){!a||this.$container.height()<this.$box.height()?a="100%":(a=this.toNumber(a),a=!1!==a?this.$container.height()-a-this.$box.height():"100%");this.scrollTo(a,b)};e.prototype.scrollTo=function(a,b){if((a=this.toNumber(a))&&0<=a||0==a)b=0==b||b&&0<=b?b:this.options.scrollingDuration,
this.$box.stop().animate({scrollTop:a},b)};e.prototype.toNumber=function(a){if(a){if("number"==typeof a)return 0<=a?a:0;if("string"==typeof a){if(0<=a.indexOf("%"))return a=parseInt(a.slice(0,a.indexOf("%"))),(this.$container.height()>=this.$box.height()?this.$container.height()-this.$box.height():0)/100*(0>a?0:100<a?100:a);if(0<=parseInt(a))return parseInt(a)}}return!1};e.prototype.resizeFrameRefresh=function(){var a=this;a.frameResize||a.refresh();a.frameResize=!0;setTimeout(function(){a.frameResize=
!1},10)};e.prototype.bindMoveScroller=function(a){this.$scroller.addClass(this.options.classes.active);this.currentMoveScrollerPosiiton=this.startMoveScrollerPosition=parseInt(this.$scroller.css("top"));this.startMoveYPosition=a;"touchstart"==event.type?(this.banScroll(),c(g).bind("touchmove.the-in__scroll",this,this.dragScroller)):"mousedown"==event.type&&(this.banDragSelect(),c(g).bind("mousemove.the-in__scroll",this,this.dragScroller))};e.prototype.unbindMoveScroller=function(a){this.$scroller.removeClass(this.options.classes.active);
"touchend"==a.type?(this.banScroll(!1),c(g).unbind("touchmove.the-in__scroll",this.dragScroller)):"mouseup"==a.type&&0==a.button&&(this.banDragSelect(!1),c(g).unbind("mousemove.the-in__scroll",this.dragScroller))};e.prototype.dragScroller=function(a){var b=a.data,d=b.startMoveScrollerPosition;"mousemove"==a.type?d=a.pageY:"touchmove"==a.type&&(d=a.originalEvent.touches[0].clientY||a.originalEvent.changedTouches[0].clientY);a=b.startMoveScrollerPosition-(b.startMoveYPosition-d);d=b.$scrollLine.height()-
b.pxSizeScroller;0>=a?a=0:a>=d&&(a=d);b.currentTopMoveScroller!=a&&(b.$scroller.css("top",a),b.currentTopMoveScroller=a,b.setScrollContent())};e.prototype.scrollingByClickOnScrolline=function(a){var b=a.data,d=b.$scroller.offset().top,c=d+b.$scroller.outerHeight();a=a.pageY;a<=d&&b.$box.scrollTop(b.$box.scrollTop()-.85*b.$box.height());a>=c&&b.$box.scrollTop(b.$box.scrollTop()+.85*b.$box.height())};e.prototype.hideDefaultScroll=function(){var a=Math.ceil(this.$box.width()-this.$container.outerWidth(!0));
this.widthDefaultScroll!=a&&(this.widthDefaultScroll=a,this.options.rtl?(this.$element.addClass(this.prefix+"rtl"),this.$box.css("margin-left",-this.widthDefaultScroll-this.options.addingIndent).css("margin-right",0)):(this.$element.removeClass(this.prefix+"rtl"),this.$box.css("margin-right",-this.widthDefaultScroll-this.options.addingIndent).css("margin-left",0)))};e.prototype.reservePlaceScroll=function(){var a=Math.ceil(this.$scroll.outerWidth(!0)),b=this.options.reservePlace;if(this.widthCustomScroll!=
a||this.stateScrollbarReservePlace!=b)this.widthCustomScroll=a,this.stateScrollbarReservePlace=b,this.options.reservePlace?(a=this.widthCustomScroll+this.options.addingIndent+"px",this.options.rtl&&!this.options.otherDirection||!this.options.rtl&&this.options.otherDirection?(this.$box.css("padding-left",a),a={left:this.widthCustomScroll+"px",right:"0"}):(this.$box.css("padding-right",a),a={right:this.widthCustomScroll+"px",left:"0"}),this.$upEndValue&&this.$upEndValue.css(a),this.$downEndValue&&this.$downEndValue.css(a)):
(this.$box.css("padding","0").css(this.options.rtl?"padding-left":"padding-right",this.options.addingIndent+"px"),this.$upEndValue&&this.$upEndValue.css({right:"0",left:"0"}),this.$downEndValue&&this.$downEndValue.css({right:"0",left:"0"}))};e.prototype.setSizeScroller=function(){var a=100*this.$box.height()/this.$container.outerHeight(!0);this.percentSizeScroller!=a&&(this.percentSizeScroller=a,100<=this.percentSizeScroller?(this.percentSizeScroller=100,this.options.reservePlace||this.$scroll.hide()):
this.$scroll.show(),this.sizeScrollLine=this.$scrollLine.height(),this.pxSizeScroller=Math.floor(this.percentSizeScroller*this.$scrollLine.height()/100),this.$scroller.outerHeight(this.pxSizeScroller+"px"))};e.prototype.setTopScroller=function(){this.topPxScrollContent=this.$box.scrollTop();this.topPercentScroller=this.topPercentScrollContent=100*this.$box.scrollTop()/this.$container.outerHeight(!0);this.topPxScroller=Math.floor(this.topPercentScroller*this.$scrollLine.height()/100);this.$scroller.css("top",
this.topPxScroller+"px")};e.prototype.setScrollContent=function(){this.topPercentScrollContent=100*parseInt(this.$scroller.css("top"))/this.$scrollLine.outerHeight(!0);this.topPxScrollContent=Math.ceil(this.topPercentScrollContent*this.$container.height()/100);this.$box.scrollTop(this.topPxScrollContent)};e.prototype.checkExtremePositionScroller=function(){0==this.$box.scrollTop()?(this.$element.addClass(this.prefix+"up-pos"),(this.options.triggers.all||this.options.triggers["up-pos"])&&this.setTrigger("up-pos")):
this.$element.removeClass(this.prefix+"up-pos");this.$box.scrollTop()+this.$box.outerHeight()>=this.$container.outerHeight(!0)||this.$box.outerHeight()>=this.$container.outerHeight(!0)?(this.$element.addClass(this.prefix+"down-pos"),(this.options.triggers.all||this.options.triggers["down-pos"])&&this.setTrigger("down-pos")):this.$element.removeClass(this.prefix+"down-pos")};e.prototype.getScrollingPercentage=function(){var a=this.$container.outerHeight(!0)-this.$box.height(),a=0>=a?0:100*this.$box.scrollTop()/
a;return 100<a?100:a};e.prototype.addContent=function(a,b,d,e){"string"==typeof a&&(a=c(a));"object"!=typeof a||c.isPlainObject(a)||(e=0<=e?e:this.options.slideDuration,d&&a.hide(),b?this.$content.prepend(a):this.$content.append(a),d&&a.slideDown(e))};e.prototype.clearContent=function(a,b){var d=this;a?(b=0<=b?b:d.options.slideDuration,d.$content.slideUp(b,function(){d.$content.empty().show()})):d.$content.empty()};e.prototype.getCurrent=function(){return{content:{position:{pc:this.topPercentScrollContent,
px:this.topPxScrollContent}},scroller:{position:{pc:this.topPercentScroller,px:this.topPxScroller},size:{pc:this.percentSizeScroller,px:this.pxSizeScroller}},scrollingline:{size:{px:this.$scrollLine.height()}},scrolling:this.scrollingPercentage}};e.prototype.addScrollingTrigger=function(a,b,d,c,e,f,g){!a||"string"!=typeof a.name&&"string"!=typeof a||(!1===this.addedTriggers&&(this.addedTriggers={}),this.addedTriggers[a.name||a]={position:a.position||b||0,sign:"<"==a.sign||">"==a.sign?a.sign:"<"==
d||">"==d?d:">",down:a.down?a.down:c?c:!1,everytime:a.everytime&&"boolean"==typeof a.everytime?a.everytime:e&&"boolean"==typeof e?e:!1,move:a.move&&"boolean"==typeof a.move?a.move:f&&"boolean"==typeof f?f:!1,once:a.once&&"boolean"==typeof a.once?a.once:g&&"boolean"==typeof g?g:!1})};e.prototype.checkAddedTriggers=function(){var a=this;c.isPlainObject(a.addedTriggers)&&c.each(a.addedTriggers,function(b,d){var c=!1,e=parseInt(a.toNumber(d.position)),f=a.$box.scrollTop();e&&(d.down&&(f=a.$container.height()-
a.$box.height()-f),">"==d.sign&&f>e||"<"==d.sign&&f<e?c=!0:1===d.everytime&&(d.everytime=!0));c&&(1!==d.everytime&&(d.move!==f&&!0!==d.move||!1===d.move)&&a.setTrigger(b),d.once&&delete a.addedTriggers[b],d.everytime&&(d.everytime=1));!1!==d.move&&(d.move=f)})};e.prototype.setTrigger=function(a,b){if("string"!=typeof a)return!1;var d=c.extend({eventType:a,plugin:this},this.getCurrent());b=c.isPlainObject(b)?c.extend(b,d):d;this.$element.trigger(a+"."+this.options.classes.main,b)};e.prototype.banDragSelect=
function(a){c("body").toggleClass(this.options.classes.banSelect,!1===a?!1:!0)};e.prototype.banScroll=function(a){c("body").toggleClass(this.options.classes.banScroll,!1===a?!1:!0)};c.fn.theinScroll=function(a){return this.each(function(){c.data(this,"theinScroll")||c.data(this,"theinScroll",new e(this,a))})}})(jQuery,window,document);
