$(function(){var c=function(a,b){var e={loadingCounter:0,loadingCount:3,loadingTimeout:2E3,loadingUrl:"/services/banners/get/",loadingParams:["type","id","adfox_name","adfox_value","adfox_pk"],filter:!1};this.defOptions=e;this.userOptions=b;this.options=$.extend(!0,{},e,b);this.$element=$(a);this.getUrl();this.getData()};c.prototype.getUrl=function(){var a=this,b=0;a.loadingUrl=a.options.loadingUrl;$.each(a.options.loadingParams,function(e,d){a.options[d]&&(a.loadingUrl=a.loadingUrl+(b++?"&":"?")+
d+"="+a.options[d])});$("#page").data("get-banners-params")&&""!=$("#page").data("get-banners-params")&&(a.loadingUrl=a.loadingUrl+(b?"&":"?")+$("#page").data("get-banners-params"))};c.prototype.getData=function(){var a=this;$.ajax({url:a.loadingUrl,dataType:"html",type:"GET",success:function(b){a.$data=$(b);a.successData()},error:function(){a.options.loadingCounter<a.options.loadingCount?(setTimeout(a.getData(),a.options.loadingTimeout),a.options.loadingCounter++):a.errorData()}})};c.prototype.successData=
function(){this.pushBanners()};c.prototype.errorData=function(){console.log("--- getBanners ERROR GetData --- "+this.loadingUrl)};c.prototype.pushBanners=function(){if(this.$data){var a=this,b=$(".banner[data-position]:not([data-hide-banners]):not([data-banner-inserted])",a.$element);"function"==typeof a.options.filter&&(b=b.filter(a.options.filter));b.each(function(){var b=$(this),d=b.data("position"),c=$(".banner__content",b),d=$("div[data-position="+d+"]",a.$data);""==c.html()&&(c.append(d.html()),
b.attr("data-banner-inserted",1))})}window.partnersjs||window.partnersjscall||!("undefined"!==typeof partners&&(document.querySelectorAll(".js-test-partner-1").length||document.querySelectorAll(".js-test-partner-2").length)||"undefined"!==typeof partners2&&document.querySelectorAll(".js-partner-3").length)||(loadJS(GLOBAL.js.partners),window.partnersjscall=!0);b=document.createEvent("Event");b.initEvent("pushbanners",!0,!0);document.body.dispatchEvent(b)};$.fn.getBanners=function(a){return this.each(function(){var b=
$.data(this,"getBanners");b||(b=new c(this,a),$.data(this,"getBanners",b))})}});
