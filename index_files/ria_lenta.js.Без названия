var $jscomp={scope:{},findInternal:function(c,b,a){c instanceof String&&(c=String(c));for(var f=c.length,d=0;d<f;d++){var e=c[d];if(b.call(a,e,d,c))return{i:d,v:e}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,b,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[b]=a.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,b,a,f){if(b){a=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var d=c[f];d in a||(a[d]={});a=a[d]}c=c[c.length-1];f=a[c];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3");
$(function(){var c={init:function(){function b(){a.body.addClass("m-widget-lenta-mini");a.body.removeClass("m-widget-lenta-active");$(".js__counter-lenta").addClass("m-zero").text(0);ria.lsSet("ria_lenta_mini","true");ria.lsSet("ria_lenta_count","0");dataLayer.push({block:"lenta_widget",event:"lenta_hide"})}var a=this;a.$elem=$("#widgetLenta .lenta__content");a.cashList=!1;a.loading=!1;a.waitList=!1;a.title=$(".lenta__header");a.body=$("#body");a.maxdate=1E3*a.$elem.find(".lenta__item:first").data("maxtime");
a.loader_delay=3E3;a.delay=700;a.widget=$(".widgets__b-slide");a.$elem.theinScroll();window.dataLayer=window.dataLayer||[];$("body").on("widget",function(b,d,c){"lenta"==d&&c&&(a.$elem.find(".lenta__list").height()<a.$elem.height()&&(a.cashList?a.addList():a.loading?a.waitList=!0:a.updateCash()),$("#widgetLenta .lenta__item-alert").length&&a.$elem.css("top",$("#widgetLenta .lenta__item-alert").height()),dataLayer.push({block:"lenta_widget",event:"lenta_open"}));"lenta"!=d||c||(a.$elem.trigger("scroll-up.the-in-scroll",
[0,100]),a.$elem.css("top",""),dataLayer.push({block:"lenta_widget",event:"lenta_close"}))});$(".lenta__close").on("click",function(){b()});$(".lenta-mini").on("click",function(){window.dataLayer=window.dataLayer||[];dataLayer.push({block:"lenta_widget",event:"lenta_open_not_fullscreen"});a.body.removeClass("m-widget-lenta-mini");a.body.addClass("m-widget-lenta-active");a.widget.addClass("m-transitiondelay");a.widget.on("transitionend",function(){$(this).removeClass("m-transitiondelay")});ria.lsSet("ria_lenta_mini",
"false")});0<$("body.m-width-max .article.m-visual_journalism_black").length||768>ria.getClientWidth()&&null==ria.lsGet("ria_lenta_mini")||"true"==ria.lsGet("ria_lenta_mini")?(0<parseInt(ria.lsGet("ria_lenta_count"))&&$(".js__counter-lenta").removeClass("m-zero"),$(".js__counter-lenta").text(ria.lsGet("ria_lenta_count")||0),a.body.addClass("m-widget-lenta-mini")):a.body.addClass("m-widget-lenta-active");if(768>ria.getClientWidth()&&"ontouchstart"in document.documentElement){var c=a.$elem.find(".lenta__list"),
d=new Hammer($(".widgets__b-cover").get(0)),e=$(".widgets__b-slide").position().top;d.get("pan").set({direction:Hammer.DIRECTION_ALL});$("#widgetLenta").css({"touch-action":"none","user-select":"none","-webkit-user-drag":"none"});d.on("panstart",function(b){c.addClass("m-lenta-pan");a.widget.addClass("m-notransition");e=a.widget.position().top});d.on("panmove",function(b){a.widget.css("top",b.deltaY+e)});d.on("panend pancancel",function(d){c.removeClass("m-lenta-pan");a.widget.removeClass("m-notransition");
a.body.hasClass("m-widget-lenta")&&100<d.deltaY?(a.widget.css("top",""),ria_layout_manager.changeState("lenta",!1)):!a.body.hasClass("m-widget-lenta")&&20<d.deltaY?(a.widget.css("top",""),b()):-100>d.deltaY?(a.widget.css("top",""),ria_layout_manager.changeState("lenta",!0)):(a.widget.css("top",e),a.widget.on("transitionend",function(){$(this).css("top","")}))})}$("#widgetLenta a").on("click",function(){dataLayer.push({block:"lenta_widget",event:"lenta_link",link:$(this).attr("href")})});a.$elem.trigger("add-scrolling-trigger.the-in-scroll",
[{name:"lenta_loadmore",down:!0,sign:"<",position:75,move:!0}]);a.$elem.on("lenta_loadmore.the-in-scroll",function(b){a.body.hasClass("m-widget-lenta")&&(a.cashList?a.addList():a.loading?a.waitList=!0:a.updateCash())});a.$elem.trigger("add-scrolling-trigger.the-in-scroll",[{name:"lenta_scroll_start",sign:">",position:1,once:!0,move:!0}]);a.$elem.on("lenta_scroll_start.the-in-scroll.the-in-scroll",function(a){dataLayer.push({block:"lenta_widget",event:"lenta_scroll"})});ria_sock&&ria_sock.on("bus_notify",
function(b){"new_article"===b.subtype&&(b.domain==GLOBAL.project||"ria_ru"==b.domain&&"ria"==GLOBAL.project)&&a.newArticle(b)})},updateCash:function(){if(!this.cashList){var b=this,a=b.$elem.find(".lenta__item:last").data("next");a?(b.loading=!0,$.ajax({url:a,dataType:"html"}).done(function(a){b.cashList=a;b.loading=!1;b.waitList&&(b.addList(),b.waitList=!1)}).fail(function(){b.loading=!1})):b.$elem.off("lenta_loadmore.the-in-scroll")}},addList:function(){if(this.cashList){var b=this.$elem.data("theinScroll").$container;
b.find(".lenta__item:last").removeAttr("data-next");b.find(".lenta__list").append(this.cashList);this.cashList=!1;this.updateCash()}},newArticle:function(b){var a=b.article_date,c=Date.now(),d=ria.getClientWidth(),a=a.split(" "),a=Date.parse(a[0]+"T"+a[1]+a[2].substr(0,3)+":"+a[2].substr(3,2));a>this.maxdate&&a<c&&(this.maxdate=a,this.body.hasClass("m-widget-lenta-mini")||$("#widgetLenta").hasClass("lenta-alert")?this.renderHidden(b):1234<d&&!this.body.hasClass("m-widget-lenta")?this.renderColumnAnimate(b):
this.body.hasClass("m-widget-lenta")?this.renderListAnimate(b):this.renderLineAnimate(b),this.renderMini(b))},renderColumnAnimate:function(b){var a=this,c=0===b.article_url.lastIndexOf("http",0)?b.article_url:GLOBAL.www+b.article_url,d=a.$elem.find(".lenta__list"),e=$(document.createElement("div")).addClass("lenta__item");e.html('<a href="'+c+'" class="lenta__item-size color-font-hover-only"><span class="lenta__item-date">'+b.article_date.substr(11,5)+'</span><span class="lenta__item-text">'+b.article_title+
"</span></a>");1==b.article_priority&&(e.addClass("lenta__item-warn"),e.find(".lenta__item-text").append('<span class="lenta__item-icon m-breaking">'+ria.getIcon("s_icon-s_lightning_small")+"</span>"));a.title.addClass("m-color");d.prepend(e).addClass("shift");setTimeout(function(){d.addClass("animate")},100);setTimeout(function(){d.removeClass("shift animate");e.addClass("m-color")},700);setTimeout(function(){a.title.removeClass("m-color");e.removeClass("m-color")},1400)},renderLineAnimate:function(b){var a=
this,c=0===b.article_url.lastIndexOf("http",0)?b.article_url:GLOBAL.www+b.article_url,d=$(document.createElement("div")),e=a.$elem.find(".lenta__item").first();a.$elem.find(".lenta__list").prepend(d);d.addClass("lenta__item empty show m-color");setTimeout(function(){e.addClass("hide");a.title.addClass("m-color")},a.delay);setTimeout(function(){d.removeClass("empty")},a.delay+100);setTimeout(function(){d.html('<a href="'+c+'" class="lenta__item-size color-font-hover-only"><span class="lenta__item-date">'+
b.article_date.substr(11,5)+'</span><span class="lenta__item-text">'+b.article_title+"</span></a>");1==b.article_priority&&(d.addClass("lenta__item-warn"),d.find(".lenta__item-text").append('<span class="lenta__item-icon m-breaking">'+ria.getIcon("s_icon-s_lightning_small")+"</span>"));d.removeClass("show");e.addClass("no-transition").removeClass("hide")},a.delay+200);setTimeout(function(){a.title.removeClass("m-color");d.removeClass("m-color");e.removeClass("no-transition")},a.delay+900)},renderListAnimate:function(b){var a=
this,c=0===b.article_url.lastIndexOf("http",0)?b.article_url:GLOBAL.www+b.article_url,d=$(document.createElement("div"));a.$elem.find(".lenta__list").prepend(d);d.addClass("lenta__item loading empty");a.$elem.addClass("m-loading");setTimeout(function(){d.removeClass("empty")},100);setTimeout(function(){d.html('<a href="'+c+'" class="lenta__item-size color-font-hover-only"><span class="lenta__item-date">'+b.article_date.substr(11,5)+'</span><span class="lenta__item-text">'+b.article_title+"</span></a>");
1==b.article_priority&&(d.addClass("lenta__item-warn"),d.find(".lenta__item-text").append('<span class="lenta__item-icon m-breaking">'+ria.getIcon("s_icon-s_lightning_small")+"</span>"))},a.loader_delay);setTimeout(function(){d.removeClass("loading");a.$elem.removeClass("m-loading")},a.loader_delay+100)},renderMini:function(b){$(".js__counter-lenta.m-zero").removeClass("m-zero");1==b.article_priority&&$(".js__counter-lenta").addClass("m-alert");b=parseInt($(".js__counter-lenta").text());$(".js__counter-lenta").text(99<=
b?"99+":++b);ria.lsSet("ria_lenta_count",b)},renderHidden:function(b){var a=0===b.article_url.lastIndexOf("http",0)?b.article_url:GLOBAL.www+b.article_url,c=$(document.createElement("div"));c.addClass("lenta__item");c.html('<a href="'+a+'" class="lenta__item-size color-font-hover-only"><span class="lenta__item-date">'+b.article_date.substr(11,5)+'</span><span class="lenta__item-text">'+b.article_title+"</span></a>");1==b.article_priority&&(c.addClass("lenta__item-warn"),c.find(".lenta__item-text").append('<span class="lenta__item-icon m-breaking">'+
ria.getIcon("s_icon-s_lightning_small")+"</span>"));this.$elem.find(".lenta__list").prepend(c)}};$("#widgetLenta").length&&$("#widgetLenta").data("url").length&&$.ajax({url:$("#widgetLenta").data("url"),dataType:"html",type:"GET",success:function(b){$("#widgetLenta .lenta__content").find(".lenta__list").append(b);c.init()}})});
