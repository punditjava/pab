(function(f,h,k,l){var d=function(a,c){var b={size:"cover",url:!1,responsive:!1};this.$el=f(a);this.$parent=this.$el.parents(':not("picture"):first');b.url||(b.url=this.$el.attr("src"));this.defOptions=b;this.userOptions=c;this.options=f.extend(!0,{},b,c);this._settings=null;this._current={breakpoints:[-1,0],url:this.options.url,originWidth:!1,originHeight:!1,loading:!1};this.init()};d.prototype.init=function(){var a=this;a.supportObjectFit=a.supportsCSS("object-fit","cover");a.supportPicture=!!h.HTMLPictureElement;
if(a.supportObjectFit&&a.supportPicture)return!1;a.setSize();a.update();f(h).on("resize",function(){a.onResize()});f(h).resize();setTimeout(function(){f(h).resize()},1E3)};d.prototype.update=function(){this.getData();this.getSettings()};d.prototype.onResize=function(){this.getSettings();this.uploadImage();this.setSize()};d.prototype.setSize=function(){if(this.supportObjectFit)return!1;"cover"==(this._current.size||this.options.size)&&this.setCover()};d.prototype.getData=function(){var a={};f.each(this.$el.data(),
function(c,b){0<=c.indexOf("responsive")&&(a[c.slice(10)]={url:b})});this.options.responsive=f.extend(this.options.responsive,a)};d.prototype.uploadImage=function(){var a=this,c=a._current,b=a._settings;if(c.url!=b.url&&c.loading!=b.url){var g=f('<img src="'+b.url+'">');c.loading=b.url;g.on("load",function(){c.originWidth=g[0].width;c.originHeight=g[0].height;c.loading=!1;c.url=b.url;a.$el.attr("src",b.url);a.setSize()}).on("error",function(){console.log("RiaPicture images ERROR "+b.url)})}};d.prototype.setCover=
function(){var a=this._current,c=this.$parent,b=this.$el,g=a.originWidth||a.originHeight?a.originWidth:b.width(),a=a.originWidth||a.originHeight?a.originHeight:b.height(),g=g/a,a=c.width(),c=c.height(),e={position:"absolute"};a/c<g?(e.top=0,e.left="-"+(c*g-a)/2+"px",e.height="100%",e.width="auto"):(e.top="-"+(a/g-c)/2+"px",e.left=0,e.height="auto",e.width="100%");b.css(e)};d.prototype.getSettings=function(a){var c=this.getClientWidth();if(a||null==this._settings||c<=this._current.breakpoints[0]||
c>this._current.breakpoints[1]){a=this.options.responsive;var b=null;if(a){var g=-1,e=[],d=-1;f.each(a,function(a){e.push(Number(a));c>=a&&g<a&&(d++,g=Number(a))});this._current.breakpoints=[e[d]?e[d]:0,e[d+1]?e[d+1]:Infinity];b=f.extend({},this.options,a[g]);delete b.responsive}else b=f.extend({},this.options),this._current.breakpoints=[0,Infinity];this._settings=b}return b};d.prototype.prefixedStyle=function(a,c){var b,d=c[0].toUpperCase()+c.slice(1),e=0,f=" webkit Moz MS ms o".split(" ");this.options.vendor_prefixes&&
(f=this.options.vendor_prefixes);for(;e<f.length;){b=(b=f[e])?b+d:c;if(b in a)return b;e++}return c};d.prototype.supportsCSS=function(a,c){var b=k.createElement("span");a=this.prefixedStyle(b,a);if(b.style[a]!==l)b.style.cssText=a+":"+c;else return!1;return b.style[a]===c};d.prototype.getClientWidth=function(){return Math.max(h.innerWidth||0,(k.getElementsByTagName("html")[0]||{}).clientWidth||0)};f.fn.riaPicture=function(a){return this.each(function(){f.data(this,"riaPicture")||f.data(this,"riaPicture",
new d(this,a))})}})(jQuery,window,document);
