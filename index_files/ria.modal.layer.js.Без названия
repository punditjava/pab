var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");"use strict";
var modalLayer={init:function(a){var b={mainClass:"modal",modifierIsOpen:"m-open",modifierIsFull:"m-full",pageSelector:"#page",modalSelector:"#modalLayer",verticalIndent:30,useFull:!0,maxWidth:"480",typeChange:"resize",clearForm:!1,hideClosingOff:!1,closeHidden:!1,beforeOpen:!1,afterOpen:!1,beforeClose:!1,afterClose:!1,durationsChangeSize:200,durationsHideContent:250,durationsShowContent:200,responsive:{}};this.defOptions=b;this.userOptions=a;this.options=$.extend(!0,{},b,a);this.$page=$(this.options.pageSelector);
delete this.options.pageSelector;this.$modal=$(this.options.modalSelector);delete this.options.modalSelector;if(0>=this.$page.length||0>=this.$modal.length)return console.log(' No layers found for "modalLayer" '),!1;this.mc=this.options.mainClass;delete this.options.mainClass;this.mOpen=this.options.modifierIsOpen;delete this.options.modifierIsOpen;this.mFull=this.options.modifierIsFull;delete this.options.modifierIsFull;this.tagsData={open:this.mc+"-open",close:this.mc+"-close",useFull:this.mc+"-use-full",
maxWidth:this.mc+"-max-width",clearForm:this.mc+"-clear-form",hideClosingOff:this.mc+"-hide-closing-off",closeHidden:this.mc+"-close-hidden",beforeOpen:this.mc+"-before-open",afterOpen:this.mc+"-after-open",beforeClose:this.mc+"-before-close",afterClose:this.mc+"-after-close"};this.$hide=$("."+this.mc+"__hide",this.$modal);this.$dimensions=$("."+this.mc+"__dimensions",this.$modal);this.$alignment=$("."+this.mc+"__alignment",this.$modal);this.$container=$("."+this.mc+"__container",this.$modal);this.$presets=
$("."+this.mc+"__preset",this.$modal);this.$contents=$("."+this.mc+"__content",this.$modal);this.$customTitle=$("."+this.mc+"__preset[data-"+this.mc+"-preset='custom'] ."+this.mc+"__main-title span",this.$modal);this.$customContent=$("."+this.mc+"__preset[data-"+this.mc+"-preset='custom'] ."+this.mc+"__main-content",this.$modal);this.$close=$("."+this.mc+"__close",this.$modal);this._settings={breakpoints:[-1,0]};this._current={preset:!1,$preset:!1,isOpen:!1,isFull:!1,pageTop:0,pageLeft:0,clientHeight:!1};
this.queueOpenData="maxWidth useFull clearForm hideClosingOff closeHidden beforeOpen afterOpen beforeClose afterClose".split(" ");this.queueCloseData=["clearForm","beforeClose","afterClose"];this.$page.css("position","relative").css("margin","0").css("padding","0");this.$modal.css("position","absolute");this.$presets.hide();this.addHandlers();this.getSettings();this.setTrigger("inited")},addHandlers:function(){var a=this;$("body").on("click","*[data-"+a.tagsData.open+"]",function(){if(""!=$(this).data(a.tagsData.open)&&
"string"==typeof $(this).data(a.tagsData.open)){var b=$(this),c={preset:b.data(a.tagsData.open)};$.each(a.queueOpenData,function(d,e){b.data(a.tagsData[e])&&(c[e]=b.data(a.tagsData[e]))});a.open(c)}});$("body").on("click","*[data-"+a.tagsData.close+"]",function(){var b=$(this),c={};$.each(a.queueCloseData,function(d,e){b.data(a.tagsData[e])&&(c[e]=b.data(a.tagsData[e]))});a.close(c)});a.$close.on("click",function(){a.close()});a.$hide.on("click",function(){a._current.hideClosingOff||a.close()});$(window).scroll(function(){a.onScroll()});
$(window).resize(function(){a.onResize()})},onScroll:function(){this._current.isOpen&&this.checkPageLeft()},onResize:function(a){if(a||this._current.isOpen)this.getSettings(),this.setLayersHeight(),this.checkPageTop(),this.checkFull()},openFull:function(a){a&&$("#modalFullContent").html(a);this.open("full")},open:function(a){if(!a)return!1;"string"==typeof a&&(a={preset:a});if(!a.preset)if(a.customTitle||a.customContent)a.preset="custom";else return!1;var b={$preset:this.$container.find("."+this.mc+
"__preset[data-"+this.mc+'-preset = "'+a.preset+'"]')};if(0<b.$preset.length){var c=this,d=c._current;c.getSettings();$.extend(!0,d,c._settings);c.setLayersHeight();b.preset=a.preset;b.customTitle=a.customTitle;b.customContent=a.customContent;$.each(c.queueOpenData,function(e,f){b[f]=b.$preset.data(c.tagsData[f])||a[f]||d[f]||!1});b.maxWidth=parseInt(b.maxWidth);"full"==b.preset&&(b.maxWidth=1E6);d.isOpen?c.change(b):($.extend(!0,d,b),c.getPageIndents(),c.$container.css("max-width",d.maxWidth),"custom"==
d.preset&&c.pushCustom(d),c.makeFunction(d.beforeOpen),d.closeHidden&&c.$close.hide(),d.$preset.show(),c.$page.css("position","fixed").css("top",-d.pageTop).css("left",-d.pageLeft),c.setLayersHeight(),c.$modal.css("position","relative").show().addClass(c.mOpen),$("html").scrollTop(0),d.isOpen=!0,c.checkFull(),c.makeFunction(d.afterOpen),c.setTrigger("open"))}else return!1},change:function(a){var b=this,c=b._current;"resize"===c.typeChange?(b.makeFunction(c.beforeClose),b.$container.css({height:parseInt(b.$container.height()),
width:parseInt(b.$container.width()),"max-width":""}),c.$preset.animate({opacity:0},c.durationsHideContent,function(){$(this).css("opacity","").hide();b.endingClosing();b.makeFunction(c.afterClose);b.setTrigger("hide");"custom"==a.preset&&b.pushCustom(a);var d={},e=parseInt(b.$dimensions.outerWidth()),f=e<=a.maxWidth?e:a.maxWidth;a.$preset.outerWidth(f);d.width=f;e<=a.maxWidth&&a.useFull&&(b.$modal.addClass(b.mFull),d["margin-top"]=0,d["margin-bottom"]=0);e>a.maxWidth&&c.isFull&&(b.$modal.removeClass(b.mFull),
b.$container.css("min-height",""),b.$presets.css("min-height",""),$("."+b.mc+"__content",b._current.$preset).css("min-height",""),d["margin-top"]=parseInt(c.verticalIndent)+"px",d["margin-bottom"]=parseInt(c.verticalIndent)+"px");f=a.$preset.outerHeight();a.$preset.css("width","");d.height=f;e<=a.maxWidth&&a.useFull&&f<c.clientHeight&&(d.height=c.clientHeight);$("html").animate({scrollTop:0},c.durationsChangeSize);b.$container.css("max-width","").animate(d,c.durationsChangeSize,function(){$.extend(!0,
c,a);b.makeFunction(c.beforeOpen);c.closeHidden&&b.$close.hide();c.$preset.css("opacity",0).show().animate({opacity:1},c.durationsShowContent,function(){$(this).css("opacity","");b.$container.css({"max-width":a.maxWidth,width:"",height:""});b.checkFull();b.makeFunction(a.afterOpen);b.setTrigger("show");b.setTrigger("change")})})})):(b.makeFunction(c.beforeClose),c.$preset.hide(),b.endingClosing(),b.makeFunction(c.afterClose),b.setTrigger("hide"),$.extend(!0,b._current,a),b.makeFunction(c.beforeOpen),
b.$container.css("max-width",c.maxWidth),c.closeHidden&&b.$close.hide(),c.$preset.show(),b.makeFunction(c.afterOpen),b.checkFull(),b.setTrigger("show"),b.setTrigger("change"))},close:function(a){var b=this._current;b.isOpen&&(a&&$.each(this.queueCloseData,function(c,d){a[d]&&(b[d]=a[d])}),this.makeFunction(b.beforeClose),this.$modal.removeClass(this.mOpen).hide().css("position","absolute"),this.$page.css("position","relative").css("top",0).css("left",0),this.setPageIndents(),this.$presets.hide(),
b.isOpen=!1,b.pageTop=0,b.pageLeft=0,b.clientHeigth=!1,b.isFull=!1,this.$modal.removeClass(this.mFull),this.endingClosing(a),this.makeFunction(b.afterClose),this.setTrigger("close"))},endingClosing:function(){var a=this._current;"custom"==a.preset&&this.clearCustom();this.clearForm(a.clearForm);this.$close.show();a.clearForm=!1;a.preset=!1;a.$preset=!1},checkFull:function(){this._current.useFull&&this.$dimensions.outerWidth()<=this.$container.outerWidth()?this.activateFull():this.deactivateFull()},
activateFull:function(){var a=this._current;a.isFull=!0;this.$modal.addClass(this.mFull);this.$container.css({"min-height":a.clientHeight,"margin-top":0,"margin-bottom":0});a.$preset.css("full"==a.preset?"height":"min-height",a.clientHeight);$("."+this.mc+"__content",a.$preset).css("min-height",a.clientHeight-parseInt(a.$preset.css("padding-top"))-parseInt(a.$preset.css("padding-bottom")))},deactivateFull:function(){var a=this._current;a.isFull=!1;this.$modal.removeClass(this.mFull);this.$container.css({"min-height":"",
"margin-top":a.verticalIndent,"margin-bottom":a.verticalIndent});this.$presets.css("min-height","");$("."+this.mc+"__content",a.$preset).css("min-height","")},clearCustom:function(){this.$customTitle.html("");this.$customContent.html("")},pushCustom:function(a){a.customTitle&&this.$customTitle.html(a.customTitle);a.customContent&&this.$customContent.html(a.customContent)},makeFunction:function(a){if("function"==typeof a)a();else if("string"==typeof a&&"function"==typeof window[a])window[a]()},clearForm:function(a){if(1==
a||"all"==a)1==a?$("."+this.mc+"__preset[data-"+this.mc+"-preset='"+this._current.preset+"'] form")[0].reset():"all"==a&&$("form",this.$container).each(function(){$(this)[0].reset()})},setPageIndents:function(){$("html").scrollTop(this._current.pageTop).scrollLeft(this._current.pageLeft)},getPageIndents:function(){this._current.pageTop=$("html").scrollTop();this._current.pageLeft=$("html").scrollLeft()},checkPageTop:function(){if(this._current.isOpen){var a=parseInt(this.$page.css("top")),b=this.$page.outerHeight(),
c=this.getClientHeigth();b+a<c&&b>c&&this.$page.css("top",-(b-c))}},checkPageLeft:function(){this._current.isOpen&&(this.pageLeft=$("html").scrollLeft(),this.$page.css("left",-$("html").scrollLeft()))},setLayersHeight:function(){var a=parseInt(this.getClientHeigth());this.$modal.css("min-height",a);this.$dimensions.css("min-height",a);this._current.clientHeight=a},setTrigger:function(a,b){if("string"!=typeof a)return!1;var c={eventType:a,plugin:this,current:this._current};b=$.isPlainObject(b)?$.extend(!0,
b,c):c;$(window).trigger(a+"ModalLayer",b)},getSettings:function(a){var b=this.getClientWidth(),c=this._settings;if(a||b<=c.breakpoints[0]||b>c.breakpoints[1])if(a=this.options.responsive){var d=-1,e=[],f=-1;$.each(a,function(a){e.push(Number(a));b>=a&&d<a&&(f++,d=Number(a))});c.breakpoints=[e[f]?e[f]:0,e[f+1]?e[f+1]:Infinity];$.extend(!0,c,this.options,a[d]);delete c.responsive}else $.extend(!0,c,this.options),c.breakpoints=[0,Infinity];return this._settings},getClientWidth:function(){return Math.max(window.innerWidth||
0,(document.getElementsByTagName("html")[0]||{}).clientWidth||0)},getClientHeigth:function(){return Math.max(window.innerHeight||0,(document.getElementsByTagName("html")[0]||{}).clientHeight||0)},testingShowObject:function(a,b,c){c=c?c:this._current;var d="customTitle customContent clientHeight preset $preset isOpen useFull isFull maxWidth typeChange clearForm pageTop pageLeft beforeClose afterClose beforeOpen afterOpen verticalIndent".split(" ");a=!0===a?d:"string"==typeof a?[a]:a;b=b?b:"";var e=
{};$.each(a,function(a,b){if(c[b]||0==c[b]||0==c[b])e[b]=c[b]});console.log(">>> "+b,e)}};
